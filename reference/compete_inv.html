<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Quantify size- and distance-dependent competition using inventory data — compete_inv • TreeCompR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Quantify size- and distance-dependent competition using inventory data — compete_inv"><meta name="description" content="compete_inv() computes one or several distance-height- or
distance-dbh-dependent competition indices based on forest inventory data."><meta property="og:description" content="compete_inv() computes one or several distance-height- or
distance-dbh-dependent competition indices based on forest inventory data."><meta property="og:image" content="https://juliarieder.github.io/TreeCompR/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">TreeCompR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/TreeCompR.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/ALS_inventory.html">ALS competition workflow</a></li>
    <li><a class="dropdown-item" href="../articles/competition-inventory.html">Quantifying competition from inventory data</a></li>
    <li><a class="dropdown-item" href="../articles/competition-pointcloud.html">Quantifying competition from point cloud data</a></li>
    <li><a class="dropdown-item" href="../articles/TLS_inventory.html">TLS competition workflow</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/juliarieder/TreeCompR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Quantify size- and distance-dependent competition using inventory data</h1>
      <small class="dont-index">Source: <a href="https://github.com/juliarieder/TreeCompR/blob/main/R/compete_inventory.R" class="external-link"><code>R/compete_inventory.R</code></a></small>
      <div class="d-none name"><code>compete_inv.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>compete_inv()</code> computes one or several distance-height- or
distance-dbh-dependent competition indices based on forest inventory data.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">compete_inv</span><span class="op">(</span></span>
<span>  <span class="va">inv_source</span>,</span>
<span>  target_source <span class="op">=</span> <span class="st">"buff_edge"</span>,</span>
<span>  <span class="va">radius</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"all_methods"</span>,</span>
<span>  x <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  y <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dbh <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  height <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  size <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  id <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dbh_unit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cm"</span>, <span class="st">"m"</span>, <span class="st">"mm"</span><span class="op">)</span>,</span>
<span>  height_unit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"m"</span>, <span class="st">"cm"</span>, <span class="st">"mm"</span><span class="op">)</span>,</span>
<span>  keep_rest <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  parallelize <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  cores <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span><span class="st">"cores"</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span><span class="st">"cores"</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span>
<span>    <span class="fu">parallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/parallel/detectCores.html" class="external-link">detectCores</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  tol <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  kmax <span class="op">=</span> <span class="fl">999</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-inv-source">inv_source<a class="anchor" aria-label="anchor" href="#arg-inv-source"></a></dt>
<dd><p>either an object of class <code>forest_inv</code> or <code>target_inv</code>, or
any object that can be imported by <code><a href="read_inv.html">read_inv()</a></code>. If the object is read in
from a source path or an unformatted data.frame,<code>x</code>, <code>y</code>, <code>id</code>, <code>dbh</code>,
<code>height</code> and/or <code>size</code> can be specified as in <code><a href="read_inv.html">read_inv()</a></code> (see the
corresponding documentation for details). If the input is a <code>forest_inv</code>
or <code>target_inv</code> object, the column definitions and further arguments
passed to <code><a href="read_inv.html">read_inv()</a></code> will be ignored. For <code>target_inv</code> objects,  the
function also ignores <code>target_source</code> and overrides further arguments
passed to <code><a href="define_target.html">define_target()</a></code>.</p></dd>


<dt id="arg-target-source">target_source<a class="anchor" aria-label="anchor" href="#arg-target-source"></a></dt>
<dd><p>one of the following:</p><ol><li><p>a path to an any object that can be imported by <code><a href="read_inv.html">read_inv()</a></code> (in this
case, column specifications have to be the same as in <code>inv_source</code> - if
this is not possible, load outside of <code>compete_inv()</code>).</p></li>
<li><p>a vector of class <code>"character"</code> containing the tree IDs identifying the
target trees in the  same format as in the <code>id</code> column of <code>inv</code>,</p></li>
<li><p>a vector of class <code>logical</code> specifying for each row of <code>inv</code> whether
the corresponding tree is a target tree,</p></li>
<li><p>another object of class <code>forest_inv</code> containing the coordinates of the
target trees. In this case, the coordinates are matched against the
coordinates in <code>inv</code> and IDs may differ (useful e.g. when target trees
are defined based on GPS coordinates and maWarumtched against an airborne
laser scanning dataset).</p></li>
<li><p>a character vector of length 1 defining the method by which the target
trees should be determined. Allowed are <code>"buff_edge"</code> for excluding all
trees that are at least one search radius from the forest edge,
<code>"exclude_edge"</code> for only excluding edge trees or <code>"all_trees"</code> for
including all trees of the dataset (which is hardly ever a good idea
unless all trees in the entire forest are in the dataset). The standard is
<code>"buff_edge"</code>. See <code><a href="define_target.html">define_target()</a></code> for details.</p></li>
</ol></dd>


<dt id="arg-radius">radius<a class="anchor" aria-label="anchor" href="#arg-radius"></a></dt>
<dd><p>numeric of length 1. Search radius (in m) around the target
tree. All neighboring trees within this radius are classified as
competitors.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>character string assigning the competition index functions to
calculate. Can either be a vector with one or several of <code>"CI_Hegyi"</code>,
<code>"CI_RK1"</code>,<code>"CI_RK2"</code>, <code>"CI_Braathe"</code>, <code>"CI_RK3"</code>, <code>"CI_RK4"</code>,
<code>"CI_size"</code> and/or the names of user-specified functions, or
<code>"all_methods"</code> (the default).<code>"all_methods"</code> computes all built-in
indices that can be calculated with the available data.</p></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>character of length 1 or name of the variable in <code>inv_source</code>
containing the x coordinates of the tree in m. If <code>NULL</code> (default),
the function tries to identify the x coordinate from the data.</p></dd>


<dt id="arg-y">y<a class="anchor" aria-label="anchor" href="#arg-y"></a></dt>
<dd><p>character of length 1 or name of the variable in <code>inv_source</code>
containing the y coordinates of the tree in meters. If <code>NULL</code> (default),
the function tries to identify the y coordinate from the data.</p></dd>


<dt id="arg-dbh">dbh<a class="anchor" aria-label="anchor" href="#arg-dbh"></a></dt>
<dd><p>character of length 1 or name of the variable in <code>inv_source</code>
containing the diameter at breast height of the tree (by default in cm, but
can be defined via <code>dbh_unit</code>). If <code>NULL</code> (default), the function tries to
identify the dbh from the data.</p></dd>


<dt id="arg-height">height<a class="anchor" aria-label="anchor" href="#arg-height"></a></dt>
<dd><p>character of length 1 or name of the variable in <code>inv_source</code>
containing the height of the tree (by default in m, but   can be defined
via <code>heigh_unit</code>). If <code>NULL</code> (default), the function tries to identify the
height from the data.</p></dd>


<dt id="arg-size">size<a class="anchor" aria-label="anchor" href="#arg-size"></a></dt>
<dd><p>character of length 1 or name of the variable in <code>inv_source</code>
containing a generic size-related variable for <code><a href="competition_indices.html">CI_size()</a></code>. If <code>NULL</code>
(default), the variable is not assigned.</p></dd>


<dt id="arg-id">id<a class="anchor" aria-label="anchor" href="#arg-id"></a></dt>
<dd><p>character of length 1 or name of the variable in <code>inv_source</code>
containing a unique tree ID. If <code>NULL</code> (default), the function tries to
identify the ID from the data. If this is not possible, the trees are
assigned a unique number. All IDs are coerced to character.</p></dd>


<dt id="arg-dbh-unit">dbh_unit<a class="anchor" aria-label="anchor" href="#arg-dbh-unit"></a></dt>
<dd><p>character of length 1. Unit for the diameter measurements
(one of "cm", "m" or "mm". defaults to "cm").</p></dd>


<dt id="arg-height-unit">height_unit<a class="anchor" aria-label="anchor" href="#arg-height-unit"></a></dt>
<dd><p>character of length 1. Unit for the diameter measurements
(one of "m", "cm" or "mm". defaults to "m").</p></dd>


<dt id="arg-keep-rest">keep_rest<a class="anchor" aria-label="anchor" href="#arg-keep-rest"></a></dt>
<dd><p>logical of length 1. Keep additional variables in the
inventory table besides x, y, dbh, size and id for filtering or further
computations? Defaults to FALSE.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>logical of length 1. Should information about progress be
printed? Defaults to TRUE.</p></dd>


<dt id="arg-parallelize">parallelize<a class="anchor" aria-label="anchor" href="#arg-parallelize"></a></dt>
<dd><p>logical of length 1. Should the computation of the
competition indices be split over several cores? Defaults to FALSE.</p></dd>


<dt id="arg-cores">cores<a class="anchor" aria-label="anchor" href="#arg-cores"></a></dt>
<dd><p>numeric of length 1. If <code>parallelize = TRUE</code>, on how many cores
should the computations be run on? Defaults to the value registered in
<code>options("cores")[[1]]</code>, or, if this is not available, to
<code>parallel::detectCores())</code>.</p></dd>


<dt id="arg-tol">tol<a class="anchor" aria-label="anchor" href="#arg-tol"></a></dt>
<dd><p>numeric of length 1. Tolerance for the match with the tree
coordinates. If coordinates are measured in the field with GPS, but
<code>inv_source</code> contains x and y coordinates from a larger number of trees
obtained by segmentation, this is the tolerance for the matching the
forest inventory against the target tree positions. If no forest tree is
within the tolerance to a target tree, no competition indices will be
calculated for this tree and the function will return a warning.
<code>tol</code> defaults to 1 m, but should be chosen depending on the measurement
accuracy of the GPS coordinates.</p></dd>


<dt id="arg-kmax">kmax<a class="anchor" aria-label="anchor" href="#arg-kmax"></a></dt>
<dd><p>integer of length 1. maximum number of nearest neighbors to
consider for determining the neighbor trees of each tree. Lower values
speed up computation, which is likely not an issue unlike your inventory
contains tens of thousands of trees, but is very relevant for big datasets.
Defaults to 999, which should be reasonable in almost all forest settings,
but has to be adjusted when there are warnings (especially for large search
radii and/or stands with small trees). If <code>kmax</code> is larger than the number
of trees in the plot, the latter is passed on as <code>k</code> to <code><a href="https://rdrr.io/pkg/nabor/man/knn.html" class="external-link">nabor::knn()</a></code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>additional arguments passed on to <code><a href="https://rdatatable.gitlab.io/data.table/reference/fread.html" class="external-link">data.table::fread()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>object of class<code>compete_inv</code>: a modified data.table with the
position and size of the designated target tree(s) and one or more
competition indices depending on chosen method(s).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>compete_inv()</code> calculates one or several distance-dependent tree
competition indices based on forest inventory data. These can be obtained
either with classical forest inventory methods, or be derived from LiDAR
point clouds (see below).</p>
<p>Inventory data can be either loaded from source, imported from an object
inheriting from class <code>data.frame</code> (i.e., data.frames, tibbles,
data.table objects etc.) or a <code>forest_inv</code> type object created with
<code><a href="read_inv.html">read_inv()</a></code>. <code>compete_inv()</code> takes the same arguments for reading
inventory data and has the same flexibility as <code><a href="read_inv.html">read_inv()</a></code>.</p>
<p>To compute competition indices for trees from an inventory dataset, it is
necessary to decide on the target trees for the analysis. While it is also
possible to calculate competition indices for all trees in the inventory,
this is almost never a good idea because unless the dataset covers all
trees in the entire forest, there will be intense edge effects for the
trees at the edge of the spatial extent of the dataset.
<code>compete_inv()</code> allows to define target trees in a number of different
ways based on the function <code><a href="define_target.html">define_target()</a></code> that is called internally.</p><div class="section">
<h3 id="available-competition-indices">Available competition indices<a class="anchor" aria-label="anchor" href="#available-competition-indices"></a></h3>


<p>All competition indices are calculated based on the subset of trees that
are within the search radius of the target tree.
The competition indices are computed according to the following
equations, where \(d_i\) and \(h_i\) are the dbh and height of neighbor
tree \(i\), \(d\) and \(h\) are dbh and height of the target tree,
and \(dist_i\) is the distance from neighbor tree \(i\) to the target
tree.</p>
<p><em>Diameter-based competition indices</em></p><ul><li><p>CI_Hegyi introduced by Hegyi (1974): <br>
\(CI_{Hegyi} = \sum_{i=1}^{n} d_{i} / (d \cdot dist_{i})\)</p></li>
<li><p>CI_RK1 according to CI1 Rouvinen &amp; Kuuluvainen (1997):<br>
\(CI_{RK1} = \sum_{i=1}^{n} \mathrm{arctan}(d_{i} / dist_{i})\)</p></li>
<li><p>CI_RK2 according to CI3 in Rouvinen &amp; Kuuluvainen (1997): <br>
\(CI_{RK2} =\sum_{i=1}^{n} (d_{i} / d) \cdot \mathrm{arctan}(d_{i}
   / dist_{i})\)</p></li>
</ul><p><em>Height-based competition indices</em></p><ul><li><p>CI_Braathe according to Braathe (1980): <br>
\(CI_{Braathe} = \sum_{i=1}^{n} h_{i} / (h \cdot dist_{i})\)</p></li>
<li><p>CI_RK3 according to CI5 in Rouvinen &amp; Kuuluvainen (1997): <br>
\(CI_{RK3} = \sum_{i=1}^{n} \mathrm{arctan}(h_{i} / dist_{i})\)
for all trees with \(h_{i} &gt; h\)</p></li>
<li><p>CI_RK4 based on CI3 in Rouvinen &amp; Kuuluvainen (1997) and
Contreras et al. (2011): <br>
\(CI_{RK4} = \sum_{i=1}^{n} (h_{i} / h) \cdot
   \mathrm{arctan}(h_{i} / dist_{i})\)</p></li>
</ul><p><em>Generic size-based Hegyi-type competition index</em></p><ul><li><p>CI_size based on Hegyi (1974), but with a user-specified size-related
variable (\(s_i\): size for neighbor tree \(i\), \(s\): size of the
target tree):
\(CI_{size} = \sum_{i=1}^{n} s_{i} / (s \cdot dist_{i})\)</p></li>
</ul><p>Further indices can be user-specified by developing a corresponding
function (see <a href="competition_indices.html">competition_indices</a> for details).</p>
<p>To efficiently deal with large inventory datasets (as can be expected from
ALS sources), the neighbors within the search radius are computed with
<code><a href="https://rdrr.io/pkg/nabor/man/knn.html" class="external-link">nabor::knn()</a></code>, which is based on an efficient C++ implementation
of the k-nearest neighbor algorithm from
<a href="https://github.com/norlab-ulaval/libnabo" class="external-link">libnabo</a>. For this, it is
required to specify a maximum number of neighbors to take into account
(<code>kmax</code>, which is passed to <code><a href="https://rdrr.io/pkg/nabor/man/knn.html" class="external-link">nabor::knn()</a></code> as <code>k</code>) that should be chosen as
low as possible, but high enough to ensure that it is sufficiently larger
than the maximum number of trees expected in the search radius. When
working with small datasets (from classical forest inventories or MLS/TLS
sources), this will likely not matter, but when working with large ALS
datasets this implementation can speed up calculation by several orders of
magnitude.
For even larger datasets, it is possible to compute the indices in parallel
using <code><a href="https://rdrr.io/pkg/foreach/man/foreach.html" class="external-link">foreach::foreach()</a></code> via the doParallel backend. If
<code>parallelize = TRUE</code>, the computation of the competition indices will be
distributed onto <code>cores</code> parallel cores.</p>
<p>As all these indices are distance-weighted sums of the relative size of all
competitor trees within the search radius compared to the target tree (or a
sum of transformations thereof), they are very sensitive to the choice of
the search radius. It is not generally possible to meaningfully compare
competition indices computed with different search radii. Over which
distance competitors affect the growth of the central tree is certainly
specific and likely also depends on the average size of trees of the same
species as the target tree and how far its roots spread under the local
conditions. Lorimer (1983) recommends to use 3.5 times the mean crown radius
of the target trees, but it is likely that there is no single value that
works well under all conditions, and possible that the same values of
competition indices calculated with the same radius have different meanings
for different species.</p>
</div>

<div class="section">
<h3 id="tree-segmentation">Tree Segmentation<a class="anchor" aria-label="anchor" href="#tree-segmentation"></a></h3>


<p>Various approaches can be used to segment (airborne) laser scanning point
clouds into single trees and to obtain inventory data based it. Existing R
packages for this are for example:</p><ul><li><p><code>TreeLS</code> package for automated segmentation of terrestrial/mobile laser
scans</p></li>
<li><p><code>lidR</code> package with different options to segment the point cloud or a
Canopy Height Model (CHM)</p></li>
<li><p><code>itcLiDARallo()</code> from the package <code>itcSegment</code></p></li>
</ul><p>Be careful with low resolution/low density point clouds, as
oversegmentation of trees is usually an issue!</p>
<p>For examples of workflows to obtain inventory dator from airborne
laser scanning data or terrestrial/mobile laser scanning data, see
<a href="https://juliarieder.github.io/TreeCompR/articles/ALS_inventory.html">ALS workflow</a>
and <a href="https://juliarieder.github.io/TreeCompR/articles/TLS_inventory.html">TLS workflow</a>,
respectively.</p>
</div>

<div class="section">
<h3 id="literature">Literature<a class="anchor" aria-label="anchor" href="#literature"></a></h3>

<ul><li><p>Hegyi, F., 1974. A simulation model for managing jackpine stands. In:
Fries, J. (Ed.), Proceedings of IUFRO meeting S4.01.04 on Growth models
for tree and stand simulation, Royal College of Forestry, Stockholm.</p></li>
<li><p>Braathe, P., 1980. Height increment of young single trees in relation to
height and distance of neighboring trees. Mitt. Forstl. VersAnst. 130,
43–48.</p></li>
<li><p>Rouvinen, S., Kuuluvainen, T., 1997. Structure and asymmetry of tree
crowns in relation to local competition in a natural mature Scot pine
forest. Can. J. For. Res. 27, 890–902.</p></li>
<li><p>Contreras, M.A., Affleck, D. &amp; Chung, W., 2011. Evaluating tree
competition indices as predictors of basal area increment in western
Montana forests. Forest Ecology and Management, 262(11): 1939-1949.</p></li>
<li><p>Lorimer, C.G., 1983. Tests of age-independent competition indices for
individual trees in natural hardwood stands. For. Ecol. Manage. 6,
343–360.</p></li>
</ul></div>

    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="read_inv.html">read_inv()</a></code> to read forest inventory data,
<code><a href="define_target.html">define_target()</a></code> for designating target trees,
<a href="competition_indices.html">competition_indices</a> for a list of available indices,
<code><a href="plot_target.html">plot_target()</a></code> to plot target tree positions in <code>target_inv</code> and
<code>compete_inv</code> objects.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># get target trees</span></span></span>
<span class="r-in"><span><span class="va">targets4</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/inventory4.csv"</span><span class="op">)</span> <span class="op">%&gt;%</span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">plot_id</span> <span class="op">==</span> <span class="st">"Plot 1"</span><span class="op">)</span> <span class="op">%&gt;%</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="read_inv.html">read_inv</a></span><span class="op">(</span>dbh <span class="op">=</span> <span class="va">diam</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">%&gt;%</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="define_target.html">define_target</a></span><span class="op">(</span>target_source <span class="op">=</span> <span class="st">"buff_edge"</span>, radius <span class="op">=</span> <span class="fl">8</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># compute Hegyi index based on existing target_inv object</span></span></span>
<span class="r-in"><span><span class="va">CI1</span> <span class="op">&lt;-</span> <span class="fu">compete_inv</span><span class="op">(</span>inv_source <span class="op">=</span> <span class="va">targets4</span>, radius <span class="op">=</span> <span class="fl">8</span>,</span></span>
<span class="r-in"><span>                   method <span class="op">=</span> <span class="st">"CI_Hegyi"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># compute Hegyi based on a file source</span></span></span>
<span class="r-in"><span><span class="va">CI2</span> <span class="op">&lt;-</span> <span class="fu">compete_inv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  inv_source <span class="op">=</span> <span class="st">"data/inventory5.csv"</span>,</span></span>
<span class="r-in"><span>  target_source <span class="op">=</span> <span class="st">"buff_edge"</span>,</span></span>
<span class="r-in"><span>  radius <span class="op">=</span> <span class="fl">12</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"CI_Hegyi"</span>,</span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="va">Koord_x</span>,</span></span>
<span class="r-in"><span>  y <span class="op">=</span> <span class="va">Koord_y</span>,</span></span>
<span class="r-in"><span>  id <span class="op">=</span> <span class="va">Baumname</span>,</span></span>
<span class="r-in"><span>  dbh <span class="op">=</span> <span class="va">Durchmesser</span>,</span></span>
<span class="r-in"><span>  sep <span class="op">=</span> <span class="st">";"</span>,</span></span>
<span class="r-in"><span>  dec <span class="op">=</span> <span class="st">","</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># compute all built-in indices that are possible with a dataset</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">CI3</span> <span class="op">&lt;-</span> <span class="fu">compete_inv</span><span class="op">(</span>inv_source <span class="op">=</span> <span class="va">targets4</span>,</span></span>
<span class="r-in"><span>                    radius <span class="op">=</span> <span class="fl">8</span>, method <span class="op">=</span> <span class="st">"all_methods"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># new implementation of Hegyi competition index</span></span></span>
<span class="r-in"><span><span class="va">CI_Hegyi_new</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">target</span>, <span class="va">neigh</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">neigh</span><span class="op">$</span><span class="va">dbh</span> <span class="op">/</span> <span class="op">(</span><span class="va">target</span><span class="op">$</span><span class="va">dbh</span> <span class="op">*</span> <span class="va">neigh</span><span class="op">$</span><span class="va">dist</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># R1 index only for trees taller than the target tree</span></span></span>
<span class="r-in"><span><span class="va">CI_RK1_tall</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">target</span>, <span class="va">neigh</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="competition_indices.html">CI_RK1</a></span><span class="op">(</span><span class="va">target</span>, <span class="va">neigh</span><span class="op">[</span><span class="va">neigh</span><span class="op">$</span><span class="va">height</span> <span class="op">&gt;</span> <span class="va">target</span><span class="op">$</span><span class="va">height</span>, <span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># get output for new indices</span></span></span>
<span class="r-in"><span><span class="fu">compete_inv</span><span class="op">(</span>inv_source <span class="op">=</span> <span class="va">targets4</span>, radius <span class="op">=</span> <span class="fl">8</span>,</span></span>
<span class="r-in"><span>            method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CI_Hegyi"</span>, <span class="st">"CI_Hegyi_new"</span>, <span class="st">"CI_RK1_tall"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># partial Hegyi index for oak</span></span></span>
<span class="r-in"><span><span class="va">CI_Hegyi_QURO</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">target</span>, <span class="va">neigh</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="competition_indices.html">CI_Hegyi</a></span><span class="op">(</span><span class="va">target</span>, <span class="va">neigh</span><span class="op">[</span><span class="va">neigh</span><span class="op">$</span><span class="va">species</span> <span class="op">==</span> <span class="st">"Quercus robur"</span>, <span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># partial Hegyi index for hornbeam</span></span></span>
<span class="r-in"><span><span class="va">CI_Hegyi_CABE</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">target</span>, <span class="va">neigh</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="competition_indices.html">CI_Hegyi</a></span><span class="op">(</span><span class="va">target</span>, <span class="va">neigh</span><span class="op">[</span><span class="va">neigh</span><span class="op">$</span><span class="va">species</span> <span class="op">==</span> <span class="st">"Carpinus betulus"</span>, <span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># partial Hegyi index for ash</span></span></span>
<span class="r-in"><span><span class="va">CI_Hegyi_FREC</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">target</span>, <span class="va">neigh</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="competition_indices.html">CI_Hegyi</a></span><span class="op">(</span><span class="va">target</span>, <span class="va">neigh</span><span class="op">[</span><span class="va">neigh</span><span class="op">$</span><span class="va">species</span> <span class="op">==</span> <span class="st">"Fraxinus excelsior"</span>, <span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># load dataset with species</span></span></span>
<span class="r-in"><span><span class="va">inv_species</span> <span class="op">&lt;-</span> <span class="fu"><a href="read_inv.html">read_inv</a></span><span class="op">(</span><span class="st">"data/inventory6.csv"</span>, keep_rest <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">inv_species</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># compute species-decomposed Hegyi indices</span></span></span>
<span class="r-in"><span><span class="va">comp_species</span> <span class="op">&lt;-</span> <span class="fu">compete_inv</span><span class="op">(</span></span></span>
<span class="r-in"><span>  inv_source <span class="op">=</span> <span class="va">inv_species</span>, target_source <span class="op">=</span> <span class="st">"buff_edge"</span>, radius <span class="op">=</span> <span class="fl">12</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CI_Hegyi_QURO"</span>, <span class="st">"CI_Hegyi_CABE"</span>, <span class="st">"CI_Hegyi_FREC"</span>, <span class="st">"CI_Hegyi"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Julia S. Rieder, Roman M. Link.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

