<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Quantify size- and distance-dependent competition using inventory data — compete_inv • TreeCompR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Quantify size- and distance-dependent competition using inventory data — compete_inv"><meta name="description" content="'compete_inv()' returns a specific distance-height-dependent or distance-
dbh-dependent competition index (or group of indices) for all trees within a
forest plot or specified target trees."><meta property="og:description" content="'compete_inv()' returns a specific distance-height-dependent or distance-
dbh-dependent competition index (or group of indices) for all trees within a
forest plot or specified target trees."><meta property="og:image" content="https://juliarieder.github.io/TreeCompR/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">TreeCompR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/TreeCompR.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/ALS_inventory.html">ALS competition workflow</a></li>
    <li><a class="dropdown-item" href="../articles/competition-inventory.html">UNKNOWN TITLE</a></li>
    <li><a class="dropdown-item" href="../articles/competition-pointcloud.html">Quantify competition from point clouds</a></li>
    <li><a class="dropdown-item" href="../articles/TLS_inventory.html">TLS competition workflow</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/juliarieder/TreeCompR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Quantify size- and distance-dependent competition using inventory data</h1>
      <small class="dont-index">Source: <a href="https://github.com/juliarieder/TreeCompR/blob/development/R/compete_inventory.R" class="external-link"><code>R/compete_inventory.R</code></a></small>
      <div class="d-none name"><code>compete_inv.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>'compete_inv()' returns a specific distance-height-dependent or distance-
dbh-dependent competition index (or group of indices) for all trees within a
forest plot or specified target trees.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">compete_inv</span><span class="op">(</span></span>
<span>  <span class="va">inv_source</span>,</span>
<span>  target_source <span class="op">=</span> <span class="st">"buff_edge"</span>,</span>
<span>  <span class="va">radius</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"all_methods"</span>, <span class="st">"CI_Hegyi"</span>, <span class="st">"CI_Braathe"</span>, <span class="st">"CI_RK1"</span>, <span class="st">"CI_RK2"</span>, <span class="st">"CI_RK3"</span>,</span>
<span>    <span class="st">"CI_RK4"</span><span class="op">)</span>,</span>
<span>  x <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  y <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dbh <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  height <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  id <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dbh_unit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cm"</span>, <span class="st">"m"</span>, <span class="st">"mm"</span><span class="op">)</span>,</span>
<span>  height_unit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"m"</span>, <span class="st">"cm"</span>, <span class="st">"mm"</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  tol <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-inv-source">inv_source<a class="anchor" aria-label="anchor" href="#arg-inv-source"></a></dt>
<dd><p>either an object of class <code>target_inv</code>, or any object that
can be imported by <code><a href="read_inv.html">read_inv()</a></code> (in this case, <code>x</code>, <code>y</code>, <code>id</code>,
<code>dbh</code>, and/or <code>height</code> can be specified as in this function – see the
corresponding documentation for details).
If provided with a <code>target_inv</code> object, the function ignores
<code>target_source</code> and overrides further arguments passed to <code><a href="read_inv.html">read_inv()</a></code> and
<code><a href="define_target.html">define_target()</a></code>.</p></dd>


<dt id="arg-target-source">target_source<a class="anchor" aria-label="anchor" href="#arg-target-source"></a></dt>
<dd><p>one of the following:</p><ol><li><p>a path to an any object that can be imported by <code><a href="read_inv.html">read_inv()</a></code> (in this
case, column specifications have to be the same as in <code>inv_source</code> - if
this is not possible, load outside of <code>compete_inv()</code>).</p></li>
<li><p>a vector of class <code>"character"</code> containing the tree IDs identifying the
target trees in the  same format as in the <code>id</code> column of <code>inv</code>,</p></li>
<li><p>a vector of class <code>logical</code> specifying for each row of <code>inv</code> whether
the corresponding tree is a target tree,</p></li>
<li><p>another object of class <code>forest_inv</code> containing the coordinates of the
target trees. In this case, the coordinates are matched against the
coordinates in <code>inv</code> and IDs may differ (useful e.g. when target trees
are defined based on GPS coordinates and matched against an airborne laser
scanning dataset).</p></li>
<li><p>a character vector of length 1 defining the method by which the target
trees should be determined. Allowed are <code>"buff_edge"</code> for excluding all
trees that are at least one search radius from the forest edge,
<code>"exclude_edge"</code> for only excluding edge trees or <code>"all_trees"</code> for
including all trees of the dataset (which is hardly ever a good idea
unless all trees in the entire forest are in the dataset). The standard is
<code>"buff_edge"</code>. See <code><a href="define_target.html">define_target()</a></code> for details.</p></li>
</ol></dd>


<dt id="arg-radius">radius<a class="anchor" aria-label="anchor" href="#arg-radius"></a></dt>
<dd><p>numeric of length 1. Search radius (in m) around the target
tree. All neighboring trees within this radius are classified as
competitors.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>character string assigning the method for quantifying
competition. dbh-distance-dependent methods are <code>"CI_Hegyi"</code>, <code>"CI_RK1"</code>,
and <code>"CI_RK2"</code>. Height-distance-dependent methods are <code>"CI_Braathe"</code>,
<code>"CI_RK3"</code>, and <code>"CI_RK4"</code>. <code>"all_methods"</code> can be specified to compute
all the indices that can be calculated with the available data.</p></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>character of length 1 or name of the variable in <code>inv_source</code>
containing the x coordinates of the tree in m. If <code>NULL</code> (default),
the function tries to identify the x coordinate from the data.</p></dd>


<dt id="arg-y">y<a class="anchor" aria-label="anchor" href="#arg-y"></a></dt>
<dd><p>character of length 1 or name of the variable in <code>inv_source</code>
containing the y coordinates of the tree in meters. If <code>NULL</code> (default),
the function tries to identify the y coordinate from the data.</p></dd>


<dt id="arg-dbh">dbh<a class="anchor" aria-label="anchor" href="#arg-dbh"></a></dt>
<dd><p>character of length 1 or name of the variable in <code>inv_source</code>
containing the diameter at breast height of the tree (by default in cm, but
can be defined via <code>dbh_unit</code>). If <code>NULL</code> (default), the function tries to
identify the dbh from the data.</p></dd>


<dt id="arg-height">height<a class="anchor" aria-label="anchor" href="#arg-height"></a></dt>
<dd><p>character of length 1 or name of the variable in <code>inv_source</code>
containing the height of the tree (by default in m, but   can be defined
via <code>heigh_unit</code>). If <code>NULL</code> (default), the function tries to identify the
height from the data.</p></dd>


<dt id="arg-id">id<a class="anchor" aria-label="anchor" href="#arg-id"></a></dt>
<dd><p>character of length 1 or name of the variable in <code>inv_source</code>
containing a unique tree ID. If <code>NULL</code> (default), the function tries to
identify the ID from the data. If this is not possible, the trees are
assigned a unique number. All IDs are coerced to character.</p></dd>


<dt id="arg-dbh-unit">dbh_unit<a class="anchor" aria-label="anchor" href="#arg-dbh-unit"></a></dt>
<dd><p>character of length 1. Unit for the diameter measurements
(one of "cm", "m" or "mm". defaults to "cm").</p></dd>


<dt id="arg-height-unit">height_unit<a class="anchor" aria-label="anchor" href="#arg-height-unit"></a></dt>
<dd><p>character of length 1. Unit for the diameter measurements
(one of "m", "cm" or "mm". defaults to "m").</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>logical of length 1. Should information about progress be
printed? Defaults to TRUE.</p></dd>


<dt id="arg-tol">tol<a class="anchor" aria-label="anchor" href="#arg-tol"></a></dt>
<dd><p>numeric of length 1. Tolerance for the match with the tree
coordinates. If coordinates are measured in the field with GPS, but
<code>inv_source</code> contains x and y coordinates from a larger number of trees
obtained by segmentation, this is the tolerance for the matching the
forest inventory against the target tree positions. If no forest tree is
within the tolerance to a target tree, no competition indices will be
calculated for this tree and the function will return a warning.
<code>tol</code> defaults to 1 m, but should be chosen depending on the measurement
accuracy of the GPS coordinates.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>additional arguments passed on to <code><a href="https://rdatatable.gitlab.io/data.table/reference/fread.html" class="external-link">data.table::fread()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>object of class<code>compete_inv</code>: a modified data.frame with the position
and size of the designated target tree(s) and one or more competition
indices depending on chosen method(s).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Using an inventory table to easily quantify distance-dependent tree
competition for a list of trees within a plot or all the trees.
The input data can either be taken directly from field measurements or
derived beforehand from LiDAR point clouds.
The function calculates 6 different Competition indices, based on tree
heights or dbh and distance to competitors.</p>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>


<p>The available competition indices are computed according to the following
equations, where \(d_i\) and \(h_i\) are the dbh and height of neighbor
tree \(i\), \(d\) and \(h\) are dbh and height of the focal tree, and
\(dist_i\) is the distance of neighbor tree \(i\).</p><div class="section">
<h3 id="diameter-based-competition-indices">Diameter-based competition indices<a class="anchor" aria-label="anchor" href="#diameter-based-competition-indices"></a></h3>

<ul><li><p>CI_Hegyi introduced by Hegyi (1974): <br>
\(CI_{Hegyi} = \sum_{i=1}^{n} d_{i} / (d \cdot dist_{i})\)</p></li>
<li><p>CI_RK1 according to CI1 Rouvinen &amp; Kuuluvainen (1997):<br>
\(CI_{RK1} = \sum_{i=1}^{n} \mathrm{arctan}(d_{i} / dist_{i})\)</p></li>
<li><p>CI_RK2 according to CI3 in Rouvinen &amp; Kuuluvainen (1997): <br>
\(CI_{RK2} =\sum_{i=1}^{n} (d_{i} / d) \cdot \mathrm{arctan}(d_{i}
   / dist_{i})\)</p></li>
</ul></div>

<div class="section">
<h3 id="height-based-competition-indices">Height-based competition indices<a class="anchor" aria-label="anchor" href="#height-based-competition-indices"></a></h3>

<ul><li><p>CI_Braathe according to Braathe (1980): <br>
\(CI_{Braathe} = \sum_{i=1}^{n} h_{i} / (h \cdot dist_{i})\)</p></li>
<li><p>CI_RK3 according to CI5 in Rouvinen &amp; Kuuluvainen (1997): <br>
\(CI_{RK3} = \sum_{i=1}^{n} \mathrm{arctan}(h_{i} / dist_{i})\)
for all trees with \(h_{i} &gt; h\)</p></li>
<li><p>CI_RK4 based on CI3 in Rouvinen &amp; Kuuluvainen (1997) and
Contreras et al. (2011): <br>
\(CI_{RK4} = \sum_{i=1}^{n} (h_{i} / h) \cdot
   \mathrm{arctan}(h_{i} / dist_{i})\)</p></li>
</ul></div>

    </div>
    <div class="section level2">
    <h2 id="tree-segmentation">Tree Segmentation<a class="anchor" aria-label="anchor" href="#tree-segmentation"></a></h2>


<p>Various approaches can be used to segment (airborne) laser scanning point
clouds into single trees and to obtain inventory data based it. Existing R
packages for this are for example:</p><ul><li><p>TreeLS package for automated segmentation of terrestrial/mobile laser scans</p></li>
<li><p>lidR package with different options to segment the point cloud or a Canopy
Height Model (CHM)</p></li>
<li><p>itcLiDARallo within the package itcSegment</p></li>
</ul><p>Be careful with low resolution/low density point clouds, as oversegmentation
of trees is usually an issue!</p>
    </div>
    <div class="section level2">
    <h2 id="literature">Literature<a class="anchor" aria-label="anchor" href="#literature"></a></h2>


<ul><li><p>Hegyi, F., 1974. A simulation model for managing jackpine stands. In:
Fries, J. (Ed.), Proceedings of IUFRO meeting S4.01.04 on Growth models
for tree and stand simulation, Royal College of Forestry, Stockholm.</p></li>
<li><p>Braathe, P., 1980. Height increment of young single trees in relation to
height and distance of neighboring trees. Mitt. Forstl. VersAnst. 130,
43–48.</p></li>
<li><p>Rouvinen, S., Kuuluvainen, T., 1997. Structure and asymmetry of tree
crowns in relation to local competition in a natural mature Scot pine
forest. Can. J. For. Res. 27, 890–902.</p></li>
<li><p>Contreras, M.A., Affleck, D. &amp; Chung, W., 2011. Evaluating tree
competition indices as predictors of basal area increment in western
Montana forests. Forest Ecology and Management, 262(11): 1939-1949.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="read_inv.html">read_inv()</a></code> to read forest inventory data,
<code><a href="define_target.html">define_target()</a></code> for designating target trees,
<code><a href="plot_target.html">plot_target()</a></code> to plot target tree positions in <code>target_inv</code> and
<code>compete_inv</code> objects.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Quantify the Hegyi index for specified target trees with search radius 10m</span></span></span>
<span class="r-in"><span><span class="va">CI</span> <span class="op">&lt;-</span> <span class="fu">compete_inv</span><span class="op">(</span><span class="st">"path/to/invtable.csv"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"path/to/target_trees.csv"</span>, radius <span class="op">=</span> <span class="fl">10</span>, method <span class="op">=</span> <span class="st">"CI_Hegyi"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Quantify the Braathe index for specified target trees with search radius</span></span></span>
<span class="r-in"><span><span class="co">#10m and adjust</span></span></span>
<span class="r-in"><span><span class="va">CI</span> <span class="op">&lt;-</span> <span class="fu">compete_inv</span><span class="op">(</span><span class="st">"path/to/invtable.csv"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"path/to/target_trees.csv"</span>, radius <span class="op">=</span> <span class="fl">10</span>, method <span class="op">=</span> <span class="st">"CI_Braathe"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Specify the units of dbh or height of your input data</span></span></span>
<span class="r-in"><span><span class="va">CI</span> <span class="op">&lt;-</span> <span class="fu">compete_inv</span><span class="op">(</span><span class="st">"path/to/invtable.csv"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"path/to/target_trees.csv"</span>, radius <span class="op">=</span> <span class="fl">10</span>, method <span class="op">=</span> <span class="st">"CI_Hegyi"</span>,</span></span>
<span class="r-in"><span>  dbh_unit <span class="op">=</span> <span class="st">"m"</span>, height_unit <span class="op">=</span> <span class="st">"m"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Quantify all available indices for all trees within the plot that are one</span></span></span>
<span class="r-in"><span><span class="co">#search radius away from plot edge</span></span></span>
<span class="r-in"><span><span class="va">CI</span> <span class="op">&lt;-</span> <span class="fu">compete_inv</span><span class="op">(</span><span class="st">"path/to/invtable.csv"</span>, target_source <span class="op">=</span> <span class="st">"buff_edge"</span>,</span></span>
<span class="r-in"><span>        radius <span class="op">=</span> <span class="fl">12</span>, method <span class="op">=</span> <span class="st">"all_methods"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Julia S. Rieder, Roman M. Link.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

