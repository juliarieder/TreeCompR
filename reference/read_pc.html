<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Read trees and neighborhoods from point cloud data. — read_pc • TreeCompR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Read trees and neighborhoods from point cloud data. — read_pc"><meta name="description" content="Read and validate a point cloud sourced from a file stored on
disk, or from an object that inherits from class data.frame, or a LAS
object from the lidR package (lidR::LAS).
Supported file formats are .las, .laz, .ply as well as all formats
accepted by data.table::fread() (.csv, .txt, and others)."><meta property="og:description" content="Read and validate a point cloud sourced from a file stored on
disk, or from an object that inherits from class data.frame, or a LAS
object from the lidR package (lidR::LAS).
Supported file formats are .las, .laz, .ply as well as all formats
accepted by data.table::fread() (.csv, .txt, and others)."><meta property="og:image" content="https://juliarieder.github.io/TreeCompR/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">TreeCompR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/TreeCompR.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/ALS_inventory.html">ALS competition workflow</a></li>
    <li><a class="dropdown-item" href="../articles/competition-inventory.html">Quantifying competition from inventory data</a></li>
    <li><a class="dropdown-item" href="../articles/competition-pointcloud.html">Quantifying competition from point cloud data</a></li>
    <li><a class="dropdown-item" href="../articles/TLS_inventory.html">TLS competition workflow</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/juliarieder/TreeCompR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Read trees and neighborhoods from point cloud data.</h1>
      <small class="dont-index">Source: <a href="https://github.com/juliarieder/TreeCompR/blob/v0.0.0.9000-beta/R/read_pointcloud.R" class="external-link"><code>R/read_pointcloud.R</code></a></small>
      <div class="d-none name"><code>read_pc.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Read and validate a point cloud sourced from a file stored on
disk, or from an object that inherits from class data.frame, or a LAS
object from the lidR package (<a href="https://rdrr.io/pkg/lidR/man/LAS-class.html" class="external-link">lidR::LAS</a>).
Supported file formats are .las, .laz, .ply as well as all formats
accepted by <code><a href="https://rdatatable.gitlab.io/data.table/reference/fread.html" class="external-link">data.table::fread()</a></code> (.csv, .txt, and others).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">read_pc</span><span class="op">(</span></span>
<span>  <span class="va">pc_source</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  xlim <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ylim <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  zlim <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  acc_digits <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-pc-source">pc_source<a class="anchor" aria-label="anchor" href="#arg-pc-source"></a></dt>
<dd><p>object that inherits from class data.frame,  or LAS object,
or character string with path to point cloud of individual tree or a whole
plot either in .las/.laz or .ply format, or any file format readable with
<code><a href="https://rdatatable.gitlab.io/data.table/reference/fread.html" class="external-link">data.table::fread()</a></code>.
If provided with a point cloud object in a data.frame, the structure and
column names are validated and homogenized; else, the function tries to
read the point cloud in the specified path.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>logical of length 1. Should information about progress be
printed? Defaults to TRUE.</p></dd>


<dt id="arg-xlim">xlim<a class="anchor" aria-label="anchor" href="#arg-xlim"></a></dt>
<dd><p>(optional) numeric vector of defining the range of x coordinates.
Can be a vector of length 2 with the minimum and maximum x value, or a
vector of arbitrary length (in this case <code><a href="https://rdrr.io/r/base/range.html" class="external-link">base::range()</a></code> is used to
constrain the x values to its range). This can be useful to for the
memory-efficient handling of very large point cloud objects. Defaults to
NULL (use full range of x coordinates).</p></dd>


<dt id="arg-ylim">ylim<a class="anchor" aria-label="anchor" href="#arg-ylim"></a></dt>
<dd><p>(optional) numeric vector of defining the range of y coordinates.
Can be a vector of length 2 with the minimum and maximum y value, or a
vector of arbitrary length (in this case <code><a href="https://rdrr.io/r/base/range.html" class="external-link">base::range()</a></code> is used to
constrain the y values to its range). This can be useful to for the
memory-efficient handling of very large point cloud objects. Defaults to
NULL (use full range of y coordinates).</p></dd>


<dt id="arg-zlim">zlim<a class="anchor" aria-label="anchor" href="#arg-zlim"></a></dt>
<dd><p>(optional) numeric vector of defining the range of z coordinates.
Can be a vector of length 2 with the minimum and maximum z value, or a
vector of arbitrary length (in this case <code><a href="https://rdrr.io/r/base/range.html" class="external-link">base::range()</a></code> is used to
constrain the z values to its range). This can be useful to for the
memory-efficient handling of very large point cloud objects. Defaults to
NULL (use full range of z coordinates).</p></dd>


<dt id="arg-acc-digits">acc_digits<a class="anchor" aria-label="anchor" href="#arg-acc-digits"></a></dt>
<dd><p>integer of length 1 defining the accuracy of the point
cloud measurements. The data will be aggregated to this number of digits
to speed up calculations and avoid problems with joining tree and
neighborhood data resulting from numeric accuracy. The resolution of the
coordinates defined by <code>acc_digits</code> should alway be at least one order of
magnitude higher than the resolution <code>res</code> used  to compute the voxel
counts in later steps. Defaults to <code>acc_digits = 2</code> (round to 2 digits
after the decimal point).</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>additional arguments passed on to <code><a href="https://rdatatable.gitlab.io/data.table/reference/fread.html" class="external-link">data.table::fread()</a></code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>object of class <code>forest_pc</code> (inherits from <code>data.table</code>) with x, y
and z coordinates of the tree or forest point cloud. <code>acc_digits</code> is
additionally stored as an attribute to avoid matching point clouds with
inconsistent resolutions.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Function for reading and validating point cloud data. Currently,
the supported file formats are .las, .laz, .ply, as well as all formats
accepted by <code><a href="https://rdatatable.gitlab.io/data.table/reference/fread.html" class="external-link">data.table::fread()</a></code>. For other formats, please load the
point cloud data separately and enter the coordinates as a data.frame.</p>
<p>If provided with tabular data (either as a data.frame or via a path to an
<code><a href="https://rdatatable.gitlab.io/data.table/reference/fread.html" class="external-link">data.table::fread()</a></code> readable source), the function by default takes the
columns named "X", "Y", and "Z" or "x", "y", and "z" to be the coordinate
vectors.
If no columns with matching names are available, it takes the first three
numeric columns and returns a message. If the dataset does not contain
three numeric columns or one of the columns labeled x, y, and z is not
numeric, the function fails with an error.</p>
<p>The xlim, ylim and zlim arguments are used internally in <code><a href="compete_pc.html">compete_pc()</a></code> to
filter the neighborhood dataset to a relevant range around the target tree
to speed up calculations.</p>
<p>Unless the input is already a <code>forest_inv</code> object, the coordinates will be
downsampled by rounding to <code>acc_digits</code>; duplicates will be discarded to
speed up  computations. The consistent rounding/voxelisation with the same
algorithm ensures that coordinates of neighbor and target trees are matched
correctly in <code><a href="compete_pc.html">compete_pc()</a></code>, as we observed especially for the .las format
that numeric differences can result in a mismatch even with data from the
same source when using raw coordinates. By default is done to 2 digits (cm accuracy)
which in most settings should be sufficient. This value should always been
chosen at least one order of magnitude more accurate than the voxel
resolution in <code><a href="compete_pc.html">compete_pc()</a></code>.</p><div class="section">
<h3 id="note-support-of-las-laz-and-ply-formats">Note: support of .las, .laz and .ply formats<a class="anchor" aria-label="anchor" href="#note-support-of-las-laz-and-ply-formats"></a></h3>


<p>The the <code>lidR</code> package has to be installed to be able to read in .las/.laz
files, which are internally processed by <code><a href="https://rdrr.io/pkg/lidR/man/readLAS.html" class="external-link">lidR::readTLSLAS()</a></code>.
Analogously, for point clouds in the .ply format, the <code>Rvcg</code> package is
required as these are loaded with <code><a href="https://rdrr.io/pkg/Rvcg/man/vcgPlyRead.html" class="external-link">Rvcg::vcgPlyRead()</a></code>.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="compete_pc.html">compete_pc()</a></code> for computing tree competition and <code><a href="tree_pos.html">tree_pos()</a></code> for
computing tree position from point cloud objects. For more details on the
pre-processing of the point clouds before using this function, have a look
at our <a href="https://juliarieder.github.io/TreeCompR/articles/competition-pointcloud.html">tutorial</a></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Read a tree point cloud in las or laz format</span></span></span>
<span class="r-in"><span><span class="va">tree</span> <span class="op">&lt;-</span> <span class="fu">read_pc</span><span class="op">(</span>pc_source <span class="op">=</span> <span class="st">"path/to/tree_point_cloud.las"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Read a tree point cloud in ply format</span></span></span>
<span class="r-in"><span><span class="va">tree</span> <span class="op">&lt;-</span> <span class="fu">read_pc</span><span class="op">(</span>pc_source <span class="op">=</span> <span class="st">"path/to/tree_point_cloud.ply"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Read a tree point cloud in txt format</span></span></span>
<span class="r-in"><span><span class="va">tree</span> <span class="op">&lt;-</span> <span class="fu">read_pc</span><span class="op">(</span>pc_source <span class="op">=</span> <span class="st">"path/to/tree_point_cloud.txt"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Read a tree point cloud in csv format with non-standard separators</span></span></span>
<span class="r-in"><span><span class="va">tree</span> <span class="op">&lt;-</span> <span class="fu">read_pc</span><span class="op">(</span>pc_source <span class="op">=</span> <span class="st">"path/to/tree_point_cloud.txt"</span>,</span></span>
<span class="r-in"><span>  dec <span class="op">=</span> <span class="st">","</span>, sep <span class="op">=</span> <span class="st">";"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Read a forest point cloud in a specified range around a target tree of</span></span></span>
<span class="r-in"><span><span class="co"># known position (+- 5 m around the origin)</span></span></span>
<span class="r-in"><span><span class="va">neighborhood</span> <span class="op">&lt;-</span> <span class="fu">read_pc</span><span class="op">(</span>pc_source <span class="op">=</span> <span class="st">"path/to/forest_point_cloud.las"</span>,</span></span>
<span class="r-in"><span>  xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">5</span>, <span class="fl">5</span><span class="op">)</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">5</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Convert a point cloud already loaded as a data.frame into forest_pc format</span></span></span>
<span class="r-in"><span><span class="va">tree</span> <span class="op">&lt;-</span> <span class="fu">read_pc</span><span class="op">(</span><span class="va">tree_df</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Julia S. Rieder, Roman M. Link.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

